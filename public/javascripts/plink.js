CloudFlare.define("prosperlinks",["prosperlinks/config","cloudflare/config","cloudflare/user","cloudflare/jquery1.7"],function(m,t,K,d){var F=t.zone,o="1"==m.pl_hoverBox?!0:!1,p=m.pl_underline,G=m.pl_limit,w="1"==m.pl_enableLinkAffiliation?!0:!1;window.alreadyLinked=[];window.sendContent={};d(document).ready(function(){var m=d("a"),x=d("body"),t=d("head"),u=function(c){var d=document.getElementsByTagName("head")[0],g=document.createElement("link");g.type="text/css";g.rel="stylesheet";g.href="http://prosperent.com/resources/css/prosperlinks/"+
c;d.appendChild(g)},y=d.browser.msie,H={css:function(){u("main.css");y&&(u("ie.css"),7>=d.browser.version&&u("ie7.css"))},meta:function(){y&&t.append('<meta http-equiv="X-UA-Compatible" content="IE=edge">')}};"undefined"!==typeof o&&!0==o&&H.css();var q={excludes:function(){return"html,head,style,header,footer,title,link,meta,script,object,iframe,h1,h2,h3,h4,h5,h6,a,button,input,cite,q,applet,param,select,option,svg,strong,textarea,noscript,dt,dd,dl,var,img,caption,code,abbr,label"},ids:function(){return"sidebar footer header navbar subnavbar seo_links thread_info similar_threads options_block_container".split(" ")},
className:function(){return"sub jhl meta blog_entry_date header sig smallfont postmeta h1 h2 h3 h4 h5 h6 after_content posthead gB twitter_box".split(" ")},goog:function(){return regx=/googleads|googleadservices/i},preFilt:function(){return"script,.prosperent-pl-no-render,.meta,#navbar,#subnavbar,header,footer,#sidebar,#footer,#header,.blog_entry_date,#seo_links,p.header,.vbmenu_popup,.sig,.smallfont,strong,applet,embed,object,link,param,select,option,svg,textarea,head,title,meta,link,noscript,a,.after_content,.posthead,.userinfo,dt,dd,dl,#thread_info,#similar_threads,#options_block_container,.gB,.twitter_box,link,var,style,select,object,img,caption,code,abbr,input,button,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,cite,label,.postmeta"}};
m.each(function(){!0==q.goog().test(d(this).attr("href"))&&d(this).parent().addClass("prosperent-pl-no-render")});window.sendContent.body=function(){var c=x.clone().find(q.preFilt()).remove().end().html();if(d.browser.msie&&7<d.browser.version)var j=[],g="",c=function(){function c(e){var n="#text"===e.nodeName?d.trim(e.nodeValue):null;return n?(j.push(e),h++,10>h?f.push(n):(h=0,f.push(n+"\n"),g+=f.join(" "),f=[]),!0):!1}a=["body"];b=[];B=this.location;a=a||[];b=b||[];0==a.length&&(a[0]="body");b.push(".prosperent-pl-no-render",
".meta","#navbar","#subnavbar","#footer","#header",".blog_entry_date","#seo_links","p.header",".vbmenu_popup",".sig",".smallfont",".after_content",".posthead",".userinfo","#thread_info","#similar_threads","#options_block_container",".gB",".postmeta",".twitter_box,link",".h1",".h2",".h3",".h4",".h5",".h6","div[class=widget-content]","div[class=googleAdText]","div[id=ad]","div[id=banner]","div[id=advertisement]","div[id=adv_container]","div[class=ad]","div[class=banner]","div[class=advertisement]",
"div[class=ad_container]","div[id=ads]","div[class*=ArticleAd]","div[id*=googleAdUnitIframe]","div[id*=adBlock]","div[class*=adBlock]","div[id*=siteSub]","div[id=BA]");-1!=B.href.indexOf(".google.")?(b.push("td[class=gac_c]"),b.push("table[id=mbEnd]"),b.push("span[id=taw]"),b.push("td[class=std]"),b.push("table[class=gssb_e]")):-1!=B.href.indexOf(".yahoo.")?(b.push("ul[class=spns reducepx-spnslist]"),b.push("ul[class*=reducepx-spnslist]"),b.push("ul[id=east]")):-1!=B.href.indexOf(".aol.")?(b.push("div[class=sllLink]"),
b.push("div[class=n]")):-1!=B.href.indexOf(".bing.")&&(b.push("div[class=sb_adsW]"),b.push("div[id=sidebar]"));excludes="script,header,footer,strong,applet,embed,object,link,param,select,option,svg,textarea,head,title,meta,link,noscript,a,dt,dd,dl,link,var,style,select,object,img,caption,code,abbr,input,button,h2,h3,h4,h5,h6,cite,label";if(!j.length)for(var e=[],h=0,f=[],l=0,k=a.length;l<k;l++)for(var n=d(a[l]),v=0,m=n.length;v<m;v++){e.push(n[v]);for(f=[];0<e.length;)if(node=e.shift())if(node.hasChildNodes()){children_to_callback=
[];i=0;for(k=node.childNodes.length;i<k;i++)child=node.childNodes[i],child.nodeName&&!c(child)&&-1===(excludes+",").indexOf(child.nodeName.toLowerCase()+",")&&!d(child).parents(b.join(",")).size()&&e.push(child)}else c(node);g+=f.join(" ");f=[]}return g}();c=c.replace(/<\!--[\s\S]*?--\>|<.*?>|{.*?}/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&gt;|&lt;/,"").replace(/[^a-zA-Z&0-9'\s{1}._"\/-]+/g," ").replace(/\w+\s+\d{1,2},\s+\d{4}|\d{2}\-\d{4}/g,"").replace(/(\()?\d{3}(\))?(\s+)?(-\s+)?\d{3}(\s+)?(-)?(\s+)?\d{4}/ig,
"").replace(/\w+(,)?\s+[A-Z]{2}\s+\d{5}((\s+)?(-)?(\s+)?(\d{4}))?/g,"").replace(/[\d{1,}|\w+[//|\-|\s{1}]{1}]\d{1,}[\/|\-|\s{1}|th]?\d+/g,"").replace(/All Rights Reserved|copyright|by:|tags:/ig,"").replace(/\n+|\r\n|\t+|\v+|\r+/g," ").replace(/(,(\s+)?){2,}|(\-(\s+)?){2,}|(\.(\s+)?){2,}/g,"").replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ");return c=c.substring(0,7E3)};window.sendContent.affUrls=[];var z={_anchors:x.find("a"),_html:document.body.innerHTML,match:function(){rewrites=[];if(null!=this._anchors&&
"undefined"!=this._anchors&&0<this._anchors.length)for(var c=0;c<=this._anchors.length-1;++c)d(this._anchors[c]).addClass("prosp-pl-affrep"+c),this.href=d(this._anchors[c]).attr("href"),this.text=d(this._anchors[c]).text(),null!=this.href&&"undefined"!=this.href&&(this.match=this.href.match(RegExp("\\b"+window.location.hostname+"\\b","i")),null==this.match&&"undefined"!=this.match&&window.sendContent.affUrls.push({text:this.text,href:this.href,classAttr:"prosp-pl-affrep"+c}))},replace:function(c){0<
c.length&&(null!=c&&"undefined"!=c)&&m.each(function(){d(this).click(function(){for(var j=0;j<=c.length-1;++j)!0==d(this).hasClass(c[j][0].classAttr)&&(d(this).attr("href","javascript:void(0);"),location.href=c[j][0].affiliate_url)})})}},A=function(c){el=document.createElement(c.el);d(c.att).each(function(){el.setAttribute(this.name,this.av)});return el},C=function(c){return c.string.length>c.limit?c.string.slice(0,c.limit)+" ...":c.string},s={_discountImg:'<img class="discount-pl" src="http://prosperent.com/resources/img/prosperlinks/discount3.png" />',
_startTable:'<table class="table-pl" cellpadding="0" cellspacing="0">',_endTable:"</table>",init:function(){},sortRows:function(c){c.sort(function(c,d){return c.price-d.price});return c},createRows:function(c){for(var c=this.sortRows(c),d="",g=0;g<=c.length-1;++g)d+='<tr><td class="'+this.getTdClass(g)+'"><img class="arrow" src="http://prosperent.com/resources/img/prosperlinks/arrow.png" /><a href="'+c[g].affUrl+'" class="td-links-pl">'+this.getMerchantEl(c[g].merchant)+this.getPriceEl(c[g].price)+
this._discountImg+"</a></td></tr>";return d},getTdClass:function(c){return 0==c?"prosperent-top-merch-pl":""},getMerchantEl:function(c){c=C({string:c,limit:25});return'<span class="prosperent-price-merch">'+c+"</span>"},getPriceEl:function(c){return'<span class="prosperent-price-pl">$'+c+"</span>"},mainImgUrl:function(c,d){data=this.sortRows(c);return 1==d?data[0].affUrl:data[0].imgUrl}};z.match();var l={init:function(c){this.cor=c},response:function(){if(2==this.cor.responseText)return D(2);null!=
this.cor.responseText&&this.hover()},parsed:function(){var c=d.parseJSON(this.cor.responseText);null==c||"undefined"==this.parse||(this.resp=c.matches,this.rw=c.rewrites)},getResults:function(){return this.resp},traverse:function(){this.parsed();for(var c=-1,d=0;d<=this.resp.length-1;++d)c+=1,this.resp[d].which=c,"undefined"!=this.resp[d]&&(null!=this.resp[d].keyword&&""!=this.resp[d].productId)&&I(this.resp[d],c)},replaceAffUrls:function(){this.traverse();("undefined"===typeof w||!0==w)&&null!=this.rw&&
"undefined"!=this.rw&&z.replace(this.rw)},clickEvent:function(){this.replaceAffUrls();resp=l.getResults();d("a.plinker").each(function(){d(this).click(function(){for(var c=0;c<=resp.length-1;c++){var j=d(this).attr("id");resp[c].query.replace(/\s{1,}|[^a-zA-Z0-9]/g,"");j.replace(/prosperlink-/g,"")==resp[c].which&&(d(this).attr("href","javascript:void(0);"),location.href=resp[c].affiliate_url)}})})},hover:function(){this.clickEvent();"undefined"!==typeof o&&!0==o&&(resp=l.getResults(),this.lastWindowWidth=
d(window).width(),this.boxes(this.lastWindowWidth),this.windowResize())},windowResize:function(){var c;d(window).resize(function(){clearTimeout(c);c=setTimeout(function(){d(window).width()!=this.lastWindowWidth&&(this.lastWindowWidth=d(window).width(),d("div.mainWrap-pl").remove(),l.boxes(this.lastWindowWidth))},100)})},elements:function(c,j){return{mainDivWrap:{el:"div",att:[{name:"className",av:d.browser.msie&&7>=d.browser.version?"prosperent-pl-mainWrap"+c+" mainWrap-pl":""},{name:"class",av:7>=
!d.browser.version?"prosperent-pl-mainWrap"+c+" mainWrap-pl":""}]},divWrapped:{el:"div",att:[{name:"id",av:"div_prosperlink_hover"+c+"_"+j},{name:"className",av:d.browser.msie&&7>=d.browser.version?"prosp_hover"+c+" prosperent-pl":""},{name:"class",av:7>=!d.browser.version?"prosp_hover"+c+" prosperent-pl":""}]}}},queryReplace:function(c){return query=c.replace(/^\d+|\s{1,}|[^a-zA-Z0-9]/g,"")},getKeyword:function(c){return keyword=null!=c?c:""},getInnerDiv:function(c){return{imgCoup:'<div class="prosperent-img-wrap-coup"><img src="'+
c.image_url+'" class="prosperent-img-pl-coup"/></div>',img:'<div class="prosperent-img-wrap"><a href="'+c.imgHref+'"><img src="'+c.mainImgUrl+'" class="'+c.imgClass+'" title="'+c.fullKw+'"/></a></div>',shopNow:'<a href="'+c.imgHref+'" class="shopnow-pl" target="_blank">Shop Now</a>',close:'<a class="close-box-pl"></a>',kw:'<a href="'+c.affiliate_url+'" target="_blank" class="pl-a-kw"><span class="prosperent-kw-pl">'+c.keyw+"</span></a>",clear:'<div style="clear:both;"></div>',logo:'<a href="http://prosperent.com/tools/prosperlinks/ref/403446" target="_blank"><img class="prosplogo-pl" src="http://prosperent.com/resources/img/prosperlinks/prosplogo.png" /></a>'}},
mozillaCss:function(){d("table.table-pl tr td").css({height:15});d("a.td-links-pl").css({"padding-top":5});d("a.td-links-pl span").css({"padding-top":2});d("img.arrow").css({"margin-top":6});d("img.discount-pl").css({"margin-top":-1})},boxes:function(c){var j=-1;d("a.plinker").each(function(){j+=1;for(var g=d(this).attr("id"),r=d(this).offset(),e=0;e<=resp.length-1;e++)if(query=l.queryReplace(resp[e].query),g.replace(/prosperlink-/g,"")==resp[e].which){resp[e].keyword=l.getKeyword(resp[e].keyword);
var h=70<resp[e].keyword.length&&null!=resp[e].isCoupon?resp[e].keyword.slice(0,70)+" ...":40>=resp[e].keyword.length?resp[e].keyword+"<br/>":null==resp[e].keyword?"":resp[e].keyword;els=l.elements(query,j);wrapper=A(els.mainDivWrap);div=A(els.divWrapped);keyw=C({string:resp[e].keyword,limit:70});imgClass=null!=resp[e].comparison?"prosperent-img-comp-pl":"prosperent-img-pl";tableData=[{merchant:resp[e].merchant,price:resp[e].price,affUrl:resp[e].affiliate_url,imgUrl:resp[e].image_url}];null!=resp[e].comparison&&
d(resp[e].comparison).each(function(){tableData.push({merchant:this.merchant,price:this.price,affUrl:this.affiliate_url,imgUrl:this.image_url})});mainImgUrl=null!=resp[e].comparison?s.mainImgUrl(tableData):resp[e].image_url;imgHref=null!=resp[e].comparison?s.mainImgUrl(tableData,1):resp[e].affiliate_url;h=l.getInnerDiv({image_url:resp[e].image_url,imgHref:imgHref,mainImgUrl:mainImgUrl,imgClass:imgClass,fullKw:h,affiliate_url:resp[e].affiliate_url,keyw:keyw});resp[e].isCoupon&&""!=resp[e].coupon_code&&
"null"!=resp[e].coupon_code?div.innerHTML=[h.imgCoup,'<div style="float:right;">',h.kw,"<br/>",resp[e].coupon_code,h.byPl,"</div>"].join(""):resp[e].isCoupon&&(""==resp[e].coupon_code||"null"==resp[e].coupon_code)?div.innerHTML=['<a class="close-box-pl"></a>',h.imgCoup,'<div class="prod-info-pl">'+h.kw+"</div>"+h.clear+'<div class="bottom-logo-pl">'+h.logo+h.shopNow+"</div>"].join(""):(rows=s.createRows(tableData),div.innerHTML=[h.close,h.img,'<div class="prod-info-pl">'+h.kw+'<div class="comparison" style="margin-left:10px;">'+
s._startTable+rows+s._endTable+"</div></div>"+h.clear+'<div class="bottom-logo-pl">'+h.logo+h.shopNow+"</div>"].join(""));wrapper.appendChild(div);document.body.appendChild(wrapper);var f=d(wrapper);f.css({display:"none"});var m=0;null!=resp[e].comparison&&f.css({height:187});resp[e].isCoupon&&"null"!=resp[e].coupon_code&&f.css({height:103});d(this).hover(function(e){var g=d(window).scrollTop();d.browser.mozilla&&l.mozillaCss();d("a.plinker").css({"z-index":0});d(this).css({"z-index":20001});m=m+
1;f.clearQueue();if(m==1){f.css({top:e.pageY-f.height()-27});if(r.left-f.width()/2<=0&&e.pageX+f.width()/2<=c){f.css({left:15});e.pageY-f.height()-27<g&&r.top-f.height()-27<g&&f.css({top:e.pageY+27})}else if(e.pageX+f.width()/2>=c&&r.left+f.width()/2>=0){f.css({left:c-f.width()-5});e.pageY-f.height()-27<g&&r.top-f.height()-27<g&&f.css({top:e.pageY+27})}else{e.pageY-f.height()-27<g&&r.top-f.height()-27<g&&f.css({top:e.pageY+27});f.css({left:e.pageX-256})}d("div.mainWrap-pl").hide();f.show()}});zlink=
this;var k=function(c){d(c).mouseleave(function(c){c.stopPropagation();f.clearQueue().delay(3).queue(function(){m=0;d(zlink).css({"z-index":0});f.hide()})})};f.hover(function(c){c.stopPropagation();f.clearQueue();k(f)});d("document:not(div.mainWrap-pl)").click(function(){f.hide()});d("a.close-box-pl").click(function(){f.hide()});k(this)}})}},E={xDomain:function(c,j){var g=new XDomainRequest;g&&(g.open("POST",j),g.onload=function(){try{l.init(g),l.response()}catch(c){}},g.onerror=function(){},g.onprogress=
function(){},g.ontimeout=function(){},g.async=!0,g.send(d.param(c)))},xmlHttp:function(c,j){d.ajax({type:"POST",url:j,data:c,xhrFields:{withCredentials:!1},complete:function(c){l.init(c);l.response();return!1}})}},D=function(c){var j={uid:403446,req:c,limit:G,bro:d.browser.msie?"ie":"non-ie",url:document.URL?document.URL:document.location.href};2==c&&(j.sid=F,j.content=sendContent);if(d.browser.msie&&window.XDomainRequest)return E.xDomain(j,"http://prosperent.com/affiliate/prosplinks/index"),!1;E.xmlHttp(j,
"http://prosperent.com/affiliate/prosplinks/index")},J=function(){var c="undefined"===typeof p||1==p?"text-decoration:underline;":"text-decoration:none;",c="undefined"!==typeof p&&2==p?"text-decoration:none;border-bottom:3px double;":c;return c="undefined"!==typeof p&&"none"==p?"text-decoration:none;":c},I=function(c,j,g){if(c.query&&"undefined"!==typeof c.affiliate_url)for(var l="string"===typeof c.query?RegExp("\\b"+c.query+"\\b","i"):c.query,e=RegExp("\\b"+c.query+"\\b\\s{1}"),h=(g||document.body).childNodes,
f=h.length,m=0;m<=f-1;m++){var k=h[m];if(!(-1!=d.inArray(d(k).attr("id"),q.ids())||-1!=d.inArray(d(k).attr("class"),q.className())))if(1===k.nodeType&&-1===(q.excludes()+",").indexOf(k.nodeName.toLowerCase()+",")&&arguments.callee(c,j,k),3===k.nodeType&&l.test(k.data)){var n=k.data.match(RegExp("\\b"+c.query+"\\b","i"));if(-1>=d.inArray(c.query,window.alreadyLinked)){window.alreadyLinked.push(c.query);h=document.createElement("span");f=document.createElement("a");d.browser.msie&&7>=d.browser.version&&
f.setAttribute("className","plinker");f.setAttribute("class","plinker");("undefined"===typeof o||!1==o)&&f.setAttribute("title","Link Added by ProsperLinks");f.setAttribute("id","prosperlink-"+j);f.setAttribute("style",J());f.href="#"+c.query.replace(/[^a-zA-Z0-9\s{1,}]/g,"");f.appendChild(document.createTextNode(n));h.appendChild(f);n=!0==e.test(k.data)&&d.browser.msie&&8>=parseInt(d.browser.version)?e:l;l=k.parentNode;e=(k.data?k.data:k.childNodes[0].data).replace(n,n==e?h.innerHTML+"&nbsp;":h.innerHTML);
n=document.createElement("span");h=document.createDocumentFragment();n.innerHTML=e;d.browser.msie&&8>=parseInt(d.browser.version)&&(n.innerHTML="jqp~"+e,n.innerHTML=n.innerHTML.replace(/jqp~\s{1}/g,"&nbsp;").replace(/jqp~/g," "));for(;n.firstChild;)h.appendChild(n.firstChild);l.replaceChild(h,k);return c.query.replace(/\s{1,}/g,"")}}}};D(1)})});
